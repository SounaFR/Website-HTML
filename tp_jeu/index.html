<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <script src="/javascript/head.js"></script>
        <title>TP JEU</title>

        <link rel="stylesheet" href="/tp_jeu/css/tp_jeu.css">
    </head>
    <body>
        <script src="/javascript/navbar.js"></script>
        
        <nav id="tp_jeu">
            <a href="/tp_jeu/index.html">Accueil</a>
            <a href="/tp_jeu/html/cards.html">Personnages</a>
            <a href="/tp_jeu/html/create.html">Créer</a>
        </nav>
        <br>
        <br>
        <h1 style="color: white;">TP Jeu en JavaScript W.I.P.</h1>
        <br>
        <!-- Partie 1 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 1
            </a>
        </p>
        <div class="collapse" id="collapseExample">
            <div class="card card-body">
                Créer deux pages HTML correspondant aux maquettes ci-jointes :
                <div>
                    <a href="/tp_jeu/assets/maquette_1.png" target="_blank"><img src="/tp_jeu/assets/maquette_1.png"></a>
                    <a href="/tp_jeu/assets/maquette_2.png" target="_blank"><img src="/tp_jeu/assets/maquette_2.png"></a>
                </div>
                <p>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseCards" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Cartes
                    </a>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseForm" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Form création
                    </a>
                </p>
                <div class="collapse" id="collapseCards">
                    <div class="card card-body">
                        <div class="d-flex justify-content-around flex-wrap" id="mainCard">
                            <div class="card" style="width: 18rem;">
                                <div class="card-body">
                                    <h5 class="card-title">Nom</h5>
                                    <p class="card-text">Classe</p>
                                    <p class="card-text">Arme</p>
                                    <p class="card-text">Endurance</p>
                                    <p class="card-text">Force</p>
                                    <p class="card-text">Agilité</p>
                                    <p class="card-text">Intelligence</p>
                                    <a href="#" class="btn btn-primary">Sélectionner</a>
                                    <a href="#" class="btn btn-danger">Supprimer</a>
                                </div>
                            </div>
                            <div class="card" style="width: 18rem;">
                                <div class="card-body">
                                    <h5 class="card-title">Nom</h5>
                                    <p class="card-text">Classe</p>
                                    <p class="card-text">Arme</p>
                                    <p class="card-text">Endurance</p>
                                    <p class="card-text">Force</p>
                                    <p class="card-text">Agilité</p>
                                    <p class="card-text">Intelligence</p>
                                    <a href="#" class="btn btn-primary">Sélectionner</a>
                                    <a href="#" class="btn btn-danger">Supprimer</a>
                                </div>
                            </div>
                            <div class="card" style="width: 18rem;">
                                <div class="card-body">
                                    <h5 class="card-title">Nom</h5>
                                    <p class="card-text">Classe</p>
                                    <p class="card-text">Arme</p>
                                    <p class="card-text">Endurance</p>
                                    <p class="card-text">Force</p>
                                    <p class="card-text">Agilité</p>
                                    <p class="card-text">Intelligence</p>
                                    <a href="#" class="btn btn-primary">Sélectionner</a>
                                    <a href="#" class="btn btn-danger">Supprimer</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collapse" id="collapseForm">
                    <div class="card card-body container-md" id="noTextAlign">
                        <div class="col-md-5" id="input">
                            <h1>Création d'un personnage</h1>
                            <div id="margin">
                                <label class="form-label">Nom</label>
                                <input type="text" class="form-control" placeholder="Nom du personnage">
                            </div>
                            <div id="margin">
                                <label class="form-label">Classe</label>
                                <select class="form-select">
                                    <option>Guerrier</option>
                                    <option>Mage</option>
                                    <option>Chasseur</option>
                                </select>
                            </div>
                            <div id="margin">
                                <label class="form-label">Arme</label>
                                <select class="form-select">
                                    <option>Épée</option>
                                    <option>Bâton</option>
                                    <option>Arc</option>
                                </select>
                            </div>
                            <div id="margin">
                                <label class="form-label">Endurance</label>
                                <input type="number" class="form-control" step="1">
                            </div>
                            <div id="margin">
                                <label class="form-label">Force</label>
                                <input type="number" class="form-control" step="1">
                            </div>
                            <div id="margin">
                                <label class="form-label">Agilité</label>
                                <input type="number" class="form-control" step="1">
                            </div>
                            <div id="margin">
                                <label class="form-label">Intelligence</label>
                                <input type="number" class="form-control" step="1">
                            </div>
                            <div id="margin">
                                <button type="submit" class="btn btn-primary">Créer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 2 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample2" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 2
            </a>
        </p>
        <div class="collapse" id="collapseExample2">
            <div class="card card-body">
                &bull; Créer un dossier « html » comprenant la page de création de personnage, un dossier « css » comprenant un fichier « main.css » et un dossier « js » comprenant un fichier « main.js ».<br>
                &bull; Appeler le fichier « main.css » dans vos pages html.<br>
                &bull; Appeler le script « main.js » uniquement dans « index.html ».<br>
                &bull; L’arborescence du projet doit ressembler à cela :<br>

                <div>
                    <a href="/tp_jeu/assets/structure.png" target="_blank"><img src="/tp_jeu/assets/structure.png"></a>
                </div>
                &bull; La structure est maintenant en place.
            </div>
        </div>
        <br>
        <!-- Partie 3 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample3" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 3
            </a>
        </p>
        <div class="collapse" id="collapseExample3">
            <div class="card card-body">
                Création d’un objet personnage et rendu en HTML avec JavaScript :<br>
                &bull; Dans le fichier « main.js », créer un objet « personnage » avec toutes ses propriétés remplies par de fausses informations, il servira de modèle pour générer l’HTML.<br>
                &bull; Générer, grâce à une fonction JavaScript, les éléments HTML correspondant à l’objet, et avoir un rendu et une structure identique à votre partie 1 (la fonction doit être écrite au début du fichier « main.js »).<br>
            
                <div>
                    <a href="/tp_jeu/assets/object_example.png" target="_blank"><img src="/tp_jeu/assets/object_example.png"></a>
                    <a href="/tp_jeu/assets/arrow.png" target="_blank"><img src="/tp_jeu/assets/arrow.png"></a>
                    <a href="/tp_jeu/assets/card.png" target="_blank"><img src="/tp_jeu/assets/card.png"></a>
                </div>
                <p>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseCode" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Code
                    </a>
                </p>
                <div class="collapse" id="collapseCode">
                    <p class="codepen" data-height="300" data-theme-id="dark" data-default-tab="js,result" data-slug-hash="yLPVqZE" data-user="SounaLEVRAI">
                        <span>See the Pen <a href="https://codepen.io/SounaLEVRAI/pen/yLPVqZE">
                        Untitled</a> by Souna (<a href="https://codepen.io/SounaLEVRAI">@SounaLEVRAI</a>)
                        on <a href="https://codepen.io">CodePen</a>.</span>
                    </p>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 4 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample4" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 4
            </a>
        </p>
        <div class="collapse" id="collapseExample4">
            <div class="card card-body">
                On va maintenant créer plusieurs personnages. Pour cela :<br>
                &bull; Dans « main.js »., créer un tableau « personnages », et le remplir avec deux objets « personnage ».<br>
                &bull; Parcourir le tableau avec une boucle, et à chaque passage, appeler la fonction qui affiche un personnage.<br>

                <div>
                    <a href="/tp_jeu/assets/personnages.png" target="_blank"><img src="/tp_jeu/assets/personnages.png"></a>
                    <a href="/tp_jeu/assets/long_arrow.png" target="_blank"><img src="/tp_jeu/assets/long_arrow.png"></a>
                    <a href="/tp_jeu/assets/cards.png" target="_blank"><img src="/tp_jeu/assets/cards.png"></a>
                </div>
                <p>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseCode2" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Code
                    </a>
                </p>
                <div class="collapse" id="collapseCode2">
                    <p class="codepen" data-height="300" data-theme-id="dark" data-default-tab="js,result" data-slug-hash="eYeBLYb" data-user="SounaLEVRAI" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
                        <span>See the Pen <a href="https://codepen.io/SounaLEVRAI/pen/eYeBLYb">
                        TP Jeu 2</a> by Souna (<a href="https://codepen.io/SounaLEVRAI">@SounaLEVRAI</a>)
                        on <a href="https://codepen.io">CodePen</a>.</span>
                    </p>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 5 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample5" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 5
            </a>
        </p>
        <div class="collapse" id="collapseExample5">
            <div class="card card-body">
                <div id="noidea">
                    Stockage et récupération du tableau dans le navigateur grâce à « localStorage » :<br>
                    &emsp;&bull; A la fin du fichier « main.js », transformer le tableau en texte et le stocker dans une variable :<br>
                    &emsp;&emsp;var tabPersos = JSON.stringify(personnages);<br>
                    &emsp;&bull; Stocker cette variable dans le navigateur avec :<br>
                    &emsp;&emsp;localStorage.setItem('tabPerso', tabPersos);<br>
                    <br>
                    Le tableau est maintenant stocké dans le navigateur, testons la page pour le créer et passons à la récupération :<br>
                    &emsp;&bull; Avant la déclaration du tableau « personnages » écrire :<br>
                    &emsp;&emsp;&emsp;var personnages = localStorage.getItem('tabPerso');<br>
                    &emsp;&emsp;Si personnages est défini :<br>
                    &emsp;&emsp;&emsp;personnages = JSON.parse(personnages, 'UTF-8’);<br>
                    &emsp;&emsp;Sinon, on initialise un tableau « personnages » vide.<br>
                    &bull; Le tableau « personnages » est maintenant complété par le contenu stocké par le navigateur, on peut donc supprimer le tableau de la partie 4.<br>
                </div>
                <br>
                <p>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseCode3" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Code
                    </a>
                </p>
                <div class="collapse" id="collapseCode3">
                    <p class="codepen" data-height="300" data-theme-id="dark" data-default-tab="js,result" data-slug-hash="YzEpOWG" data-user="SounaLEVRAI" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
                        <span>See the Pen <a href="https://codepen.io/SounaLEVRAI/pen/YzEpOWG">
                        TP Jeu 3</a> by Souna (<a href="https://codepen.io/SounaLEVRAI">@SounaLEVRAI</a>)
                        on <a href="https://codepen.io">CodePen</a>.</span>
                    </p>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 6 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample6" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 6
            </a>
        </p>
        <div class="collapse" id="collapseExample6">
            <div class="card card-body">
                <div id="noidea">
                    Création de la fonction « savePersos() »<br>
                    &emsp;&bull; Créer la fonction « savePersos() » avec pour paramètre le tableau « personnages ».<br>
                    &emsp;&bull; A l’intérieur, déplacer le code permettant le stockage de ce tableau.<br>
                    La fonction doit ressembler à ça :<br>
                </div>
                <br>
                <div>
                    <a href="/tp_jeu/assets/code_savePerso.png" target="_blank"><img src="/tp_jeu/assets/code_savePerso.png"></a>
                </div>
                Elle sera appelée lorsque l’on créera un nouveau personnage.
            </div>
        </div>
        <br>
        <!-- Partie 7 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample7" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 7
            </a>
        </p>
        <div class="collapse" id="collapseExample7">
            <div class="card card-body">
                <div id="noidea">
                    &bull; Créer un fichier « functions.js » dans le dossier « js ».<br>
                    &bull; Déplacer toutes les fonctions présentes dans « main.js » à l’intérieur de « functions.js ».<br>
                    &bull; Insérer la balise &lt;script src="./js/functions.js">&lt;/script&gt;, dans « index.html », juste avant le script « main.js ».<br>
                    &bull; Insérer la balise &lt;script src="../js/functions.js">&lt;/script&gt;, dans « addPerso.html ».<br>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 8 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample8" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 8
            </a>
        </p>
        <div class="collapse" id="collapseExample8">
            <div class="card card-body">
                <div id="noidea">
                    Création d’un personnage :<br>
                    &emsp;&bull; Dans le fichier « functions.js », à la suite de la fonction « savePersos() », créer la fonction « createPerso() ».<br>
                    &emsp;&bull; Dans cette fonction, créer un objet « personnage » vide, puis récupérer le contenu de chaque champs du formulaire de création de personnage et attribuer les valeurs à l’objet « personnage », pour cela :<br>
                    &emsp;&emsp;&bull; personnage.nom = document.getElementById("nom").value;<br>
                    &emsp;&emsp;&bull; personnage.classe = document.getElementById("classe").value;<br>
                    &emsp;&emsp;&bull; On répète cela pour tous les inputs.<br>
                    <br>
                    &emsp;&bull; Une fois le personnage créé, on fait un « console.log(personnage); » pour vérifier que l’on récupère bien toutes les informations.<br>
                    &emsp;&bull; Dans le fichier « addPerso.html », ajouter « onclick="createPerso()"» dans le bouton du formulaire.<br>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 9 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample9" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 9
            </a>
        </p>
        <div class="collapse" id="collapseExample9">
            <div class="card card-body">
                <div id="noidea">
                    Sauvegarde du personnage :<br>
                    &emsp;&bull; Dans le fichier « main.js », copier le code permettant la récupération et la création du tableau.<br>
                    &emsp;&bull; Dans la fonction « createPerso() », à la place du « console.log », copier le code précédent.<br>
                    &emsp;&bull; Le tableau « personnages » est maintenant accessible, faites « personnages.push(personnage); » pour ajouter le personnage créé au tableau.<br>
                    &emsp;&bull; A la suite, lancer la fonction « savePersos(personnages); ».<br>
                    &emsp;&bull; Dans « addPerso.html », ajouter « action="../index.html" » en attribut dans la balise « form », cela permettra la redirection vers la page d'accueil après la création d'un personnage.<br>
                </div>
                <br>
                <p>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseCode5" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Code
                    </a>
                </p>
                <div class="collapse" id="collapseCode5">
                    <p class="codepen" data-height="300" data-theme-id="dark" data-default-tab="js,result" data-slug-hash="oNoWgxO" data-user="SounaLEVRAI" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
                        <span>See the Pen <a href="https://codepen.io/SounaLEVRAI/pen/oNoWgxO">
                        TP Jeu 4</a> by Souna (<a href="https://codepen.io/SounaLEVRAI">@SounaLEVRAI</a>)
                        on <a href="https://codepen.io">CodePen</a>.</span>
                    </p>
                    <div id="noidea">
                        PS : c'est un peu bugué sur codepen mais le code fonctionne dans un navigateur normal.
                    </div>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 10 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample10" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 10
            </a>
        </p>
        <div class="collapse" id="collapseExample10">
            <div class="card card-body">
                <div id="noidea">
                    Suppression d'un personnage :<br>
                    &emsp;&bull; Dans le fichier « functions.js », créer la fonction « supPerso(i) ».
                    L'indice « i » servira à identifier le bon personnage à supprimer.
                    Cette fonction doit se lancer lors du clique du bouton « supprimer » d'un personnage,
                    il faudra donc ajouter un attribut « onclick » sur ce bouton, et récupérer l'indice du personnage dans la fonction « affichePerso() ».<br>
                    &emsp;&bull; Dans le fichier « main.js », ajouter l'argument « i » de la boucle dans l'appel de la fonction : « affichePerso(element, i); ».<br>
                    &emsp;&bull; Dans le fichier « functions.js », ajouter le paramètre « i » à la fonction « affichePerso() ».<br>
                    &emsp;&bull; Dans la fonction « affichePerso() », après la création du bouton de suppression, ajouter l'attribut « onclick » à ce bouton : « btn2.setAttribute('onlick', 'supPerso('+i+')'); ».
                    Au clique, on appelle la fonction de suppression avec l'indice du personnage en paramètre.<br>
                    &emsp;&bull; Dans la fonction « supPerso() », récupérer le tableau « personnages », puis faire un « splice() » de notre personnage dans ce tableau, et enfin sauvegarder le nouveau tableau avec la fonction « savePersos() ».<br>
                    &emsp;&bull; Après la sauvegarde, écrire « document.location.reload(); » afin de recharger la page et prendre en compte les changements.<br>
                </div>
                <br>
                <p>
                    <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseCode6" role="button" aria-expanded="false" aria-controls="collapseExample">
                        Code
                    </a>
                </p>
                <div class="collapse" id="collapseCode6">
                    <p class="codepen" data-height="300" data-theme-id="dark" data-default-tab="js,result" data-slug-hash="gOXWpOR" data-user="SounaLEVRAI" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
                        <span>See the Pen <a href="https://codepen.io/SounaLEVRAI/pen/gOXWpOR">
                        TP Jeu 5</a> by Souna (<a href="https://codepen.io/SounaLEVRAI">@SounaLEVRAI</a>)
                        on <a href="https://codepen.io">CodePen</a>.</span>
                    </p>
                    <div id="noidea">
                        PS : c'est un peu bugué sur codepen mais le code fonctionne dans un navigateur normal.
                    </div>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 11 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseExample11" role="button" aria-expanded="false" aria-controls="collapseExample">
                Partie 11
            </a>
        </p>
        <div class="collapse" id="collapseExample11">
            <div class="card card-body">
                <div id="noidea">
                    La récupération du tableau se fait plusieurs fois dans ce TP, créer une fonction qui s'en charge serait une bonne idée pour optimiser le code :<br>
                    &emsp;&bull; Dans le fichier « functions.js », créer une fonction « recupListePersos(); ».
                    Cette fonction reprendra les instructions de récupération du tableau de personnages et le <strong>retournera</strong> (ne pas oublier « return personnages; »).<br>
                    &emsp;&bull; Remplacer toutes les instructions de récupération du tableau avec : « personnages = recupListePersos(); ».<br>
                </div>
            </div>
        </div>
        <br>
        <!-- Partie 11 -->
        <p>
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#bonus" role="button" aria-expanded="false" aria-controls="bonus">
                Bonus
            </a>
        </p>
        <div class="collapse" id="bonus">
            <div class="card card-body">
                <div id="noidea">
                    Quelques idées pour vous entraîner en améliorant le TP.<br>
                    &emsp;&bull; Pouvoir modifier le personnage.<br>
                    &emsp;&bull; Attribuer une image à chaque classe pour l'afficher sur les différents personnages.<br>
                    &emsp;&bull; Pour aller beaucoup plus loin : créer une interface de connexion utilisateur et lier les personnages à ce dernier.<br>
                </div>
            </div>
        </div>

        <div id="scroll_to_top">
            <a href="#top"><img src="/tp_jeu/assets/top.png" alt="Retourner en haut" /></a>
        </div>

        <footer>
            <div id="footer">
                <p>Merci à mon formateur de m'avoir laissé champ libre pour présenter le TP sur mon site.</p>
            </div>
        </footer>

        <script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    </body>
</html>